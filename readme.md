# Ассемблер и Интерпретатор для УВМ

Этот проект включает в себя два основных компонента: **ассемблер** и **интерпретатор**. Ассемблер конвертирует инструкции из XML в бинарный формат, а интерпретатор выполняет бинарные инструкции на УВМ, которая моделирует процесс выполнения программ.

## Структура проекта

- **`assembler.py`**: Скрипт для компиляции инструкций в бинарный формат.
- **`interpreter.py`**: Скрипт для интерпретации бинарного кода и выполнения команд УВМ.
- **`test_assembler.py`**: Тесты для проверки корректности работы ассемблера.
- **`abs_test.py`**: Тесты для проверки операций с вектором значений с применением операции `abs()`.
- **`sample_input.xml`**: Пример входного XML-файла с инструкциями.
- **`log.csv`**: Логирование операций, выполненных ассемблером.

## Зависимости

Проект написан на Python 3 и использует следующие стандартные библиотеки:
- `argparse`
- `struct`
- `xml.etree.ElementTree`

## Основной функционал

### Ассемблер

Ассемблер принимает на вход список инструкций в формате JSON и конвертирует их в бинарный формат. Каждая инструкция может быть связана с операцией (например, загрузка значения в стек, чтение или запись в память) и набором аргументов.

#### Пример работы ассемблера:

```python
instructions = [
    {"operation": "load", "args": [539]},
    {"operation": "read", "args": [163]},
    {"operation": "write", "args": [671]},
    {"operation": "abs", "args": []}
]
binary_data = assembler(instructions, "log.csv")
```
Интерпретатор
Интерпретатор выполняет бинарный код, загружая его в память УВМ, и исполняет инструкции. После выполнения команд, результат сохраняется в XML-файл, который можно просмотреть.

Пример работы интерпретатора:
```python
interpreter("test_binary.bin", "test_result.xml", (0, 255))
```
Генерация инструкций для операции abs()
Функция generate_abs_instructions генерирует инструкции для применения операции abs() к каждому элементу вектора. После генерации, инструкция сохраняется в бинарном файле, а затем выполняется интерпретатором.

Пример использования:
```python
vector = [-5, 10, -15, 20, -25]
instructions = generate_abs_instructions(vector)
save_to_bin(assembler(instructions, "test_log.csv"), "test_binary.bin")
interpreter("test_binary.bin", "test_result.xml", (0, len(vector) - 1))
```
Тестирование
Тестирование Ассемблера
Для тестирования ассемблера в проекте используется несколько проверок, которые гарантируют, что функции корректно конвертируют инструкции в бинарный формат.

Примеры тестов:

Входной XML файл (Пример)
```xml
<instructions>
  <instruction>
    <operation>load</operation>
    <arg>539</arg>
  </instruction>
  <instruction>
    <operation>read</operation>
    <arg>163</arg>
  </instruction>
</instructions>
```
Выходной XML файл (Пример)
```xml
<memory>
  <memory_element address="0">100</memory_element>
  <memory_element address="1">200</memory_element>
  ...
</memory>
```

Установите зависимости (если необходимо).
Запустите ассемблер или интерпретатор:
```bash
python assembler.py input.xml output.bin log.csv
python interpreter.py output.bin result.xml 0 255
```